{
    "id": "org.kde.kalarm",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.15-21.08",
    "sdk": "org.kde.Sdk",
    "command": "kalarm",
    "rename-icon": "kalarm",
    "finish-args": [
        "--device=dri",
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--socket=pulseaudio"
    ],

    "modules": [
        {
            "name": "kmime",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kmime-21.12.2.tar.xz",
                    "sha256": "4f5c1c8258002dabd43eb818caab8a1c276889707669074801cae14bdc03ab63"
                }
             ]
        },
        {
            "name": "kimap",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kimap-21.12.2.tar.xz",
                    "sha256": "0393c8d4d4588d0cf8ad9b50e83abb06df569513860ff620448a9b6927d2aa69"
                }
            ]
        },
        {
            "name": "boost",
            "buildsystem": "simple",
            "build-commands": [
                "./bootstrap.sh --prefix=/app --with-libraries=system",
                "./b2 -j $FLATPAK_BUILDER_N_JOBS install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://boostorg.jfrog.io/artifactory/main/release/1.78.0/source/boost_1_78_0.tar.bz2",
                    "sha256": "8681f175d4bdb26c52222665793eef08490d7758529330f98d3b29dd0735bccc"
                }
            ]
        },
        {
            "name": "akonadi",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DBUILD_TOOLS=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                "-DDATABASE_BACKEND=SQLITE"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/akonadi-21.12.2.tar.xz",
                    "sha256": "48da21d34a78423dc23ade2b3caf459297b1b1e7e81001383185c2a1da4738c4"
                }
            ],
            "modules": [
                {
                    "name": "sqlite3",
                    "config-opts": [
                        "--enable-threadsafe",
                        "--enable-threads-override-locks"
                    ],
                    "build-options": {
                        "cflags": "-DSQLITE_ENABLE_UNLOCK_NOTIFY=1"
                    },
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://sqlite.org/2016/sqlite-autoconf-3150200.tar.gz",
                            "sha256": "07b35063b9386865b78226cdaca9a299d938a87aaa8fdc4d73edb0cef30f3149"
                        }
                    ],
                    "cleanup": [
                        "/bin/sqlite3",
                        "*.a"
                    ]
                }
            ]
        },
        {
            "name": "akonadi-mime",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/akonadi-mime-21.12.2.tar.xz",
                    "sha256": "d6851edb02d53c79588157699e30db4a9b55793cc34e023f74bc2c6a845ba6d9"
                }
            ]
        },
        {
            "name": "grantlee",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/steveire/grantlee/archive/refs/tags/v5.2.0.tar.gz",
                    "sha256" : "139acee5746b957bdf1327ec0d97c604d4c0b9be42aec5d584297cb5ed6a990a"
                }
            ]
        },
        {
            "name": "grantleetheme",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/steveire/grantlee/archive/v5.2.0.tar.gz",
                    "sha256": "139acee5746b957bdf1327ec0d97c604d4c0b9be42aec5d584297cb5ed6a990a"
                }
            ]
        },
        {
            "name": "gpgme",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gnupg.org/ftp/gcrypt/gpgme/gpgme-1.16.0.tar.bz2",
                    "sha256": "6c8cc4aedb10d5d4c905894ba1d850544619ee765606ac43df7405865de29ed0"
                }
            ],
            "cleanup": [
                "*.la"
            ]
        },
        {
            "name": "qtkeychain",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_INSTALL_LIBDIR=/app/lib",
                "-DLIB_INSTALL_DIR=/app/lib",
                "-DBUILD_TRANSLATIONS=NO"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/frankosterfeld/qtkeychain/archive/v0.12.0.tar.gz",
                    "sha256": "cc547d58c1402f6724d3ff89e4ca83389d9e2bdcfd9ae3d695fcdffa50a625a8"
                }
            ]
        },
        {
            "name": "libkleo",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/libkleo-21.12.2.tar.xz",
                    "sha256": "ed8311ab4c93bd764e199ddc30e6b7650dbcbab47a4e76b262216d212bf30f6f"
                }
            ]
        },
        {
            "name": "akonadi-contacts",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/akonadi-contacts-21.12.2.tar.xz",
                    "sha256": "15bf18a1fdfdf2b1b69395ad323be07d1a5fd597b2d0668c4da2fc994c0908ab"
                }
            ]
        },
        {
            "name": "kpimtextedit",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kpimtextedit-21.12.2.tar.xz",
                    "sha256": "a8d15835822a1461fcdb07fb479685d5e6ac7058a037f76d7673b731c814a419"
                }
            ]
        },
        {
            "name": "kidentitymanagement",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kidentitymanagement-21.12.2.tar.xz",
                    "sha256": "7316f14eded47806b7127fa0b7f2dd536f18bd0c1712e0b54479bb39ba92dc01"
                }
            ]
        },
        {
            "name": "kcalutils",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kcalutils-21.12.2.tar.xz",
                    "sha256": "28a214e2e52adcb79a29760761bdb770728245f5f30014cf2266fb8bfc228744"
                }
            ]
        },
        {
            "name": "kalarmcal",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kalarmcal-21.12.2.tar.xz",
                    "sha256": "8831ba02438276d9637fb574c8ca2508decc61aa029979e6bdb46ab2e3488896"
                }
            ]
        },
        {
            "name": "ksmtp",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/ksmtp-21.12.2.tar.xz",
                    "sha256": "57968254d6297cee9c54fa429fad2c5a7b1e0f50a1e5c7e43ce6aa1a0079e541"
                }
            ]
        },
        {
            "name": "libkgapi",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/libkgapi-21.12.2.tar.xz",
                    "sha256": "1cc50f9123f991f93a66852f802e05bf1d30a22909b58a535cb8ec1cdb06dd58"
                }
            ]
        },
        {
            "name": "kmailtransport",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kmailtransport-21.12.2.tar.xz",
                    "sha256": "7ce750dcd85df0aa860c7b8298fe4d1ef32eed9b0ace4f80b00223ff61c44667"
                }
            ]
        },
        {
            "name": "kldap",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kldap-21.12.2.tar.xz",
                    "sha256": "f4e2d54afc8e9a25017e43dfc8698e9059d11df86db10a1b1c30161c9c20aaf5"
                }
            ],
            "modules": [
                {
                    "name": "openldap",
                    "config-opts": [
                        "--disable-slapd",
                        "--disable-backends",
                        "--disable-debug",
                        "--disable-overlays",
                        "--disable-syslog",
                        "--enable-dynamic",
                        "--enable-ipv6",
                        "--with-cyrus-sasl",
                        "--with-threads",
                        "--with-tls=gnutls"
                    ],
                    "rm-configure": true,
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://mirror.eu.oneandone.net/software/openldap/openldap-release/openldap-2.4.44.tgz",
                            "sha256": "d7de6bf3c67009c95525dde3a0212cc110d0a70b92af2af8e3ee800e81b88400"
                        }
                    ],
                    "cleanup": [
                        "/bin/ldap*",
                        "/sbin",
                        "/share/man",
                        "*.la"
                    ]
                }
            ]
        },
        {
            "name": "libkdepim",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/libkdepim-21.12.2.tar.xz",
                    "sha256": "e91bb990b57458cd7d25afa049429dff60877403037bf6067c737c77c24a1f63"
                }
            ]
        },
        {
            "name": "xapian",
            "sources": [
                {
                    "type": "archive",
                    "url": " https://oligarchy.co.uk/xapian/1.4.18/xapian-core-1.4.18.tar.xz",
                    "sha256": "196ddbb4ad10450100f0991a599e4ed944cbad92e4a6fe813be6dce160244b77"
                }
            ],
            "config-opts": [
                "--disable-documentation"
            ],
            "cleanup": [
                "/share/doc/xapian-core",
                "/bin/xapian-*",
                "/bin/copydatabase",
                "/bin/quest",
                "/bin/simpleexpand",
                "/bin/simpleindex",
                "/bin/simplesearch",
                "*.la"
            ]
        },
        {
            "name": "akonadi-search",
            "config-opts": [
                "-DBUILD_TESTING=OFF",
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                "-DAKONADISEARCH_ENABLE_KRUNNER_RUNNER=OFF"
            ],
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/akonadi-search-21.12.2.tar.xz",
                    "sha256": "1e1357be513586295cd88dea362d8e42af60899519e26c7f2af4ab543ceae2c2"
                }
            ]
        },
        {
            "name": "pimcommon",
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/pimcommon-21.12.2.tar.xz",
                    "sha256": "c9dc00d266f16a31e753cca0660a6556b721a57c389cd7066b1ca52e2d94d0de"
                }
            ]
        },
        {
            "name": "kalarm",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DENABLE_KAUTH_HELPER=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/release-service/21.12.2/src/kalarm-21.12.2.tar.xz",
                    "sha256": "d0796b2ae14f97ae94894951c6731801aeac2f2d0a82856daa910241b1667038"
                },
                {
                    "type": "patch",
                    "path": "kauth.patch"
                }
            ]
        }
    ]
}
